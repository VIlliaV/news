{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BAQMC,EAAWC,SAASC,eAAe,WAEzC,SAASC,IACP,OAAOC,KAAKC,MAAMC,aAAaC,QAAQ,e,CAGzC,IAAIC,EAAU,GACVC,EAAS,GAEPC,EAAaT,SAASU,cAAc,kBAmJ1C,SAASC,IACP,IAAMC,EAASL,EAAQM,MAAK,SAAAC,G,OAAUA,EAAOC,KAAOP,C,IACpDQ,iBAAiBJ,E,EAzInB,SAA6BK,GAE3B,GAAmB,OAAfA,GAA6C,IAAtBA,EAAWC,OACpC,OAAO,EAAAC,EAAAC,sBAGT,IAAMC,EAASJ,EAAWK,QAAO,SAACC,EAAKC,GAgFzC,IAAsBC,EACOC,EAApBC,EAAMC,EAAOC,EAYEC,EAhEpB,OA5BAP,GAAO,wCACuCQ,OADCP,EAAKT,IAAI,wDAK7CgB,OAJmCP,EAAKQ,IAAI,0IAK5CD,OA+Ef,SAAkBP,GAChB,IAAMS,EAAWT,EAAKU,MAAMC,KAAI,SAAAC,G,OAAMA,EAAG,kBAAkB,GAAGJ,G,IAC9D,OAAwB,IAApBC,EAASf,OACJ,gCACKe,C,CApFDI,CAASb,GAAM,oBAIcO,OAH7BP,EAAKc,UAAU,mEAKlBP,QAiFYD,EAnFmCN,EAAKe,WAoF1DT,GAGK,YAvFiE,mFAGpEC,OADIP,EAAKT,IAAIyB,MAAM,GAAIhB,EAAKT,IAAIG,QAAQ,cAIHa,OAmB7C,SAAwBP,GACtB,IAAMiB,EAAYvC,IAElB,GAAIuC,EAAW,CACb,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAUvB,OAAQwB,GAAK,EACzC,GAAID,EAAUC,GAAG3B,MAAQS,EACvB,MAAkB,oXAKtB,MAAkB,gX,CAIpB,MAAkB,+W,CArCZmB,CAAenB,EAAKT,KAAK,4EAM3BgB,OAHuCP,EAAKoB,MAAM,iEAKVb,OAmD9C,SAAmBD,GACjB,OAAIA,EAAKZ,OAAS,IACTY,EAAKe,UAAU,EAAG,KAAO,MAEzBf,C,CAzDLgB,CAAUtB,EAAKuB,UAAU,4DAGShB,OADMP,EAAKT,IAAI,8CAETgB,QAyDxBN,EA1D+BD,EAAKwB,eA2D7BtB,EAAqBuB,EAAApD,EAAA,CAArB4B,EAAWyB,MAAM,KAAI,GAAzCvB,EAAoBD,EAAqB,GAAnCE,EAAcF,EAAqB,GAA5BG,EAAOH,EAAqB,GAChC,GAAUK,OAAPF,EAAI,KAAYE,OAATH,EAAM,KAAQG,OAALJ,IA5DqC,sDACnBI,OAATP,EAAKQ,IAAI,gGAM5CT,C,GACN,8CAAiEQ,OAAnBd,EAAW,GAAGkC,KAAK,SACpEpD,EAASqD,mBAAmB,YAAa/B,E,CAhD3CgC,CAAoBnD,MAEpB,EAAAoD,EAAAC,kBA+HA9C,EAAW+C,iBAAiB,SAE5B,SAAsBC,GACpBC,YAAW,YAKb,SAAkBD,GACU,MAAtBA,EAAEE,OAAOC,WACXH,EAAEI,iBACFrD,EAASiD,EAAEE,OAAOG,cAAcC,GAEhCpD,I,CATAqD,CAASP,E,GACR,I","sources":["src/js/page-read.js"],"sourcesContent":["import {\n  getDatesReadingNews,\n  getReadingNewsByDate,\n  // testReding,\n  getReadingNews,\n} from './localStorage';\nimport { whenNotFoundMarkup } from './not-found-markup';\n\nconst readUlEl = document.getElementById('read-ul');\n\nfunction getReadArticles() {\n  return JSON.parse(localStorage.getItem('readingNews'));\n}\n\nlet newsAll = [];\nlet idNews = [];\n\nconst markupList = document.querySelector('#favorite-list');\ngenerateCardsMarkup(getReadArticles());\n\ngetReadingNews();\n\n// getDatesReadingNews();\n// const arrOfDates = getDatesReadingNews();\n// for (date of arrOfDates) {\n//   const news = getReadingNewsByDate(date);\n//   generateCardsMarkup(news);\n// }\n\nfunction generateCardsMarkup(cardsArray) {\n  // newsAll = newsCard;\n  if (cardsArray === null || cardsArray.length === 0) {\n    return whenNotFoundMarkup();\n  }\n\n  const markup = cardsArray.reduce((acc, item) => {\n    acc += `<li class=\"favorite-cards__item\" id=\"${item.uri}\">\n    <a class=\"favorite-cards__image-link\" href=\"${item.url}\" target=\"_blank\"\n    rel=\"noopener noreferrer nofollow\">\n      <img\n        class=\"favorite-cards__img\" width=\"440\"\n        src=\"${getPhoto(item)}\"\n        alt=\"${item.per_facet}\"\n      \n      />\n      <p class=\"favorite-cards__category\">${addDefaultText(item.subsection)}</p>\n      <button type=\"button\" class=\"favorite-cards__remove-btn\n      id=\"${item.uri.slice(38, item.uri.length)}\">\n      ${onLoadFavorits(item.uri)}\n      </button>\n    </a>\n    <h2 class=\"favorite-cards__news-title\">${item.title}\n    </h2>\n    <p class=\"favorite-cards__dicription\">\n    ${limitText(item.abstract)}\n    </p>\n    <div class=\"favorite-cards__bottom\" id=\"${item.uri}\">\n      <p class=\"favorite-cards__date\">${reformatDate(item.published_date)}</p>\n      <a class=\"favorite-cards__link\" href=\"${item.url}\" target=\"_blank\"\n      rel=\"noopener\">\n        Read more\n      </a>\n    </div>\n  </li>`;\n    return acc;\n  }, `<p class=\"list-by-date\">new data news      ${cardsArray[0].date}</p>`);\n  readUlEl.insertAdjacentHTML('beforeend', markup);\n}\n// ${onLoadFavorits(item.uri)}\n\nfunction onLoadFavorits(item) {\n  const localRead = getReadArticles();\n  let result = [];\n  if (localRead) {\n    for (let i = 0; i < localRead.length; i += 1) {\n      if (localRead[i].uri === item) {\n        return (result = `Remove from read<svg class=\"favorite-cards__heart-icon\" width=\"36\" height=\"32\">\n            <path fill=\"var(--few)\" style=\"stroke: var(--few)\" d=\"M10.325 0.875c-1.472 0-2.738 1.197-3.325 2.447-0.587-1.25-1.854-2.447-3.325-2.447-2.029 0-3.675 1.647-3.675 3.675 0 4.127 4.163 5.209 7 9.289 2.682-4.055 7-5.294 7-9.289 0-2.029-1.647-3.675-3.675-3.675z\">\n          </svg>`);\n      }\n    }\n    return (result = `Add to read<svg class=\"favorite-cards__heart-icon\" width=\"36\" height=\"32\">\n            <path fill=\"transparent\" style=\"stroke: var(--few)\"  d=\"M10.325 0.875c-1.472 0-2.738 1.197-3.325 2.447-0.587-1.25-1.854-2.447-3.325-2.447-2.029 0-3.675 1.647-3.675 3.675 0 4.127 4.163 5.209 7 9.289 2.682-4.055 7-5.294 7-9.289 0-2.029-1.647-3.675-3.675-3.675z\">\n          </svg>`);\n  }\n  return (result = `Add to read<svg class=\"favorite-cards__heart-icon\" width=\"36\" height=\"32\">\n            <path fill=\"transparent\" style=\"stroke: var(--few)\" d=\"M10.325 0.875c-1.472 0-2.738 1.197-3.325 2.447-0.587-1.25-1.854-2.447-3.325-2.447-2.029 0-3.675 1.647-3.675 3.675 0 4.127 4.163 5.209 7 9.289 2.682-4.055 7-5.294 7-9.289 0-2.029-1.647-3.675-3.675-3.675z\">\n          </svg>`);\n}\nfunction onAddNews(e) {\n  if (e.target.nodeName === 'BUTTON') {\n    e.preventDefault();\n    idNews = e.target.parentElement.parentElement.id;\n    if (e.target.firstChild.data.trim() === 'Add to favorite') {\n      e.target.firstChild.data = `Remove from favorite`;\n      e.target.lastElementChild.lastElementChild.attributes.fill.textContent =\n        '#4b48db';\n      findIdNews();\n    } else {\n      e.target.firstChild.data = `Add to favorite`;\n      e.target.lastElementChild.lastElementChild.attributes.fill.textContent =\n        'transparent';\n      deleteCard(e);\n    }\n  }\n}\n\nfunction limitText(text) {\n  if (text.length > 110) {\n    return text.substring(0, 110) + '...';\n  } else {\n    return text;\n  }\n}\n\nfunction reformatDate(dateString) {\n  const [year, month, day] = dateString.split('-');\n  const newDate = `${day}/${month}/${year}`;\n  return newDate;\n}\n\nfunction getPhoto(item) {\n  const photoUrl = item.media.map(el => el['media-metadata'][2].url);\n  if (photoUrl.length === 0) {\n    return '/image-not-found.584be82b.jpg';\n  } else return photoUrl;\n}\n\nfunction addDefaultText(text) {\n  if (text) {\n    return text;\n  } else {\n    return 'Other...';\n  }\n}\n\nfunction deleteCard(event) {\n  event.preventDefault();\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  const uriId = event.target.attributes[2].nodeName;\n  const uriIdClean = uriId.slice(0, uriId.length - 1);\n  removeFromFavoriteArticles(uriIdClean);\n}\n\nmarkupList.addEventListener('click', runSetTimout);\n\nfunction runSetTimout(e) {\n  setTimeout(() => {\n    goToRead(e);\n  }, 1000);\n}\n\nfunction goToRead(e) {\n  if (e.target.nodeName === 'A') {\n    e.preventDefault();\n    idNews = e.target.parentElement.id;\n    // window.location.href = e.target.href;\n    findIdNews();\n  }\n}\n\nfunction findIdNews() {\n  const finded = newsAll.find(option => option.uri == idNews);\n  addToReadingNews(finded);\n}\n"],"names":["$1t1Wn","parcelRequire","$5634adedd08aee33$var$readUlEl","document","getElementById","$5634adedd08aee33$var$getReadArticles","JSON","parse","localStorage","getItem","$5634adedd08aee33$var$newsAll","$5634adedd08aee33$var$idNews","$5634adedd08aee33$var$markupList","querySelector","$5634adedd08aee33$var$findIdNews","finded","find","option","uri","addToReadingNews","cardsArray","length","$dv3BY","whenNotFoundMarkup","markup","reduce","acc","item","dateString","ref","year","month","day","text","concat","url","photoUrl","media","map","el","$5634adedd08aee33$var$getPhoto","per_facet","subsection","slice","localRead","i","$5634adedd08aee33$var$onLoadFavorits","title","substring","$5634adedd08aee33$var$limitText","abstract","published_date","$parcel$interopDefault","split","date","insertAdjacentHTML","$5634adedd08aee33$var$generateCardsMarkup","$UL92Z","getReadingNews","addEventListener","e","setTimeout","target","nodeName","preventDefault","parentElement","id","$5634adedd08aee33$var$goToRead"],"version":3,"file":"read.f3cd15c3.js.map"}