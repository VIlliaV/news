{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,aAAMC,EAAM,2CAKNC,GAHe,iEAAqEC,OAAJF,GAGxD,4DAAgEE,OAAJF,IAC/D,4DAAgEE,OAAJF,EAAI,mB,SA0D5EG,I,OAAAC,EAAcC,MAAAC,KAAAC,U,UAAdH,I,OAAAA,EAAfI,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,I,IACQC,E,kFAAaC,MAAM,GAAyBX,OAAtBD,IACzBa,MAAK,SAAAC,GACJ,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAM,4BAElB,OAAOF,EAAKG,M,IAEbJ,MAAK,SAAAC,GAEJ,OADAI,QAAQC,IAAIL,EAAKM,SACVN,EAAKM,O,kBATVT,EAAIU,EAAAC,K,kBAWHX,G,4CAZoBP,MAAAC,KAAAC,U,CC7D7B,IAAMiB,EAAYC,SAASC,cAAc,mBAEzCC,OAAOC,iBAAiB,QAAQ,WAC5BzB,IACKW,MAAK,SAAAe,GAsDd,IAA2BC,IArDDD,EAsDxBL,EAAUO,mBAAmB,YAAiCD,EA5C3DE,KAAI,SAAAC,G,IAgCaC,EAhCVC,EAAKF,EAALE,MAAOC,EAAKH,EAALG,MAAOC,EAAQJ,EAARI,SAAUC,EAAcL,EAAdK,eAAgBC,EAAGN,EAAHM,IAC1CC,EAASL,EAAM,GAAG,kBAAkB,GAAQ,IAChD,MAAO,kLAgBDjC,OAZSsC,EAAO,+eAedtC,OAHFkC,EAAM,qFAM4BlC,QAQxBgC,EAXKG,EAarBH,EAAKO,OAAS,KAChBP,EAAOA,EAAKQ,MAAM,EAAG,MACL,MAEPR,GAjBwB,kHAIehC,OADNoC,EAAe,4DACLpC,OAAJqC,EAAI,mD,IAInDI,KAAK,KAtCFxB,QAAQC,IAAIS,E,IAEbe,OAAM,SAAAC,G,OAAO1B,QAAQC,IAAIyB,E","sources":["src/js/api.js","src/js/home.js"],"sourcesContent":["const KEY = 'api-key=iQPZlbRhGEGKM4smMiUCFTOlyGy9K2EX';\n\nconst CAREGORY_URL = `https://api.nytimes.com/svc/news/v3/content/section-list.json?${KEY}`;\nconst SEARCH_BY_CAREGORY_URL =\n  'https://api.nytimes.com/svc/news/v3/content/all/';\nconst MOST_POPULAR_NEWS_URL = `https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?${KEY}`;\nconst SEARCH_BY_WORD_URL = `https://api.nytimes.com/svc/search/v2/articlesearch.json?${KEY}&sort=relevance`;\n\nfunction fixDate(date) {\n  let day = date.split('.');\n  if (Number(day[0]) < Number(day[2])) return day.reverse().join('');\n  return day.join('');\n}\n\nasync function getNewsBySearch(word, page = 1, date = 20100101) {\n  let begin_date = 0;\n  let end_date = 0;\n\n  if (date === 20100101) {\n    begin_date = date;\n    end_date = fixDate(new Date().toLocaleDateString());\n  } else {\n    begin_date = fixDate(date);\n    end_date = begin_date;\n  }\n\n  const newsJson = await fetch(\n    `${SEARCH_BY_WORD_URL}&q=${word}&page=${page}&begin_date=${begin_date}&end_date=${end_date}`\n  );\n  if (!newsJson.ok) {\n    const err = new Error('Something went wrong 404');\n    return err;\n  }\n  const news = await newsJson.json();\n  console.log(news.response.docs);\n  return news.response.docs;\n}\n\nasync function getCategory() {\n  const categories = await fetch(`${CAREGORY_URL}`)\n    .then(resp => {\n      if (!resp.ok) {\n        throw new Error('Something went wrong 404');\n      }\n      return resp.json();\n    })\n    .then(categories => {\n      console.log(categories.results);\n      return categories.results;\n    });\n  return categories;\n}\n\nasync function getNewsByCategory(category) {\n  const resp = await fetch(`${SEARCH_BY_CAREGORY_URL}${category}.json?${KEY}`);\n  if (!resp.ok) {\n    const err = new Error('Something went wrong 404');\n    return err;\n  }\n  const categories = await resp.json();\n  console.log(categories.results);\n  return categories.results;\n}\n\nasync function getPopularNews() {\n  const news = await fetch(`${MOST_POPULAR_NEWS_URL}`)\n    .then(resp => {\n      if (!resp.ok) {\n        throw new Error('Something went wrong 404');\n      }\n      return resp.json();\n    })\n    .then(resp => {\n      console.log(resp.results);\n      return resp.results;\n    });\n  return news;\n}\n\nexport { getCategory, getNewsByCategory, getPopularNews, getNewsBySearch };\n","import { getPopularNews } from '../js/api';\nimport '../sass/favorite-section.scss';\n\nconst newsCards = document.querySelector('.favorite-cards');\n\nwindow.addEventListener('load', () => {\n    getPopularNews()\n        .then(data => { \n        appendCardsMurkup(data);\n        console.log(data);\n      })\n      .catch(err => console.log(err));\n    \n});\n\nfunction generateCardsMurkup(cardsArray) {\n    \n  return cardsArray\n    .map(({ media, title, abstract, published_date, url }) => {\n      let imgUrl = media[0]['media-metadata'][2]['url'];\n      return `<li class=\"favorite-cards__item\">\n          <div class=\"favorite-cards__image-cont\" href=\"\">\n            <img\n              class=\"favorite-cards__img\"\n              src=\"${imgUrl}\"\n              alt=\"asia-businesswoman\"\n            />\n            <p class=\"favorite-cards__job-src\">Job searching</p>\n            <button class=\"favorite-cards__remove-btn\">\n              Remove from favorite\n              <svg class=\"favorite-cards__heart-icon\" width=\"32\" height=\"32\">\n                <use href=\"images/sprite-full.svg#heart-full\"></use>\n              </svg>\n            </button>\n          </div>\n          <h2 class=\"favorite-cards__news-title\">\n          ${title}\n          </h2>\n          <p class=\"favorite-cards__dicription\">\n            ${textCropping(abstract)}\n          </p>\n          <div class=\"favorite-cards__bottom\">\n            <p class=\"favorite-cards__date\">${published_date}</p>\n            <a class=\"favorite-cards__link\" href=\"${url}\">Read more</a>\n          </div>\n        </li>`;\n    })\n    .join('');\n}\n\nfunction textCropping(text) {\n  let result;\n  if (text.length > 150) {\n    text = text.slice(0, 150);\n    result = text + '...';\n  } else {\n    result = text;\n  }\n  return result;\n}\n\nfunction appendCardsMurkup(cards) {\n  newsCards.insertAdjacentHTML('beforeend', generateCardsMurkup(cards));\n}\n\n\n"],"names":["$bpxeT","parcelRequire","$8197bff4c39d585a$var$KEY","$8197bff4c39d585a$var$MOST_POPULAR_NEWS_URL","concat","$8197bff4c39d585a$export$972a697636ceb23f","$8197bff4c39d585a$var$_getPopularNews","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","news","fetch","then","resp","ok","Error","json","console","log","results","_ctx","sent","$4f1c0259bbb55e68$var$newsCards","document","querySelector","window","addEventListener","data","cards","insertAdjacentHTML","map","param","text","media","title","abstract","published_date","url","imgUrl","length","slice","join","catch","err"],"version":3,"file":"index.1ebfb0be.js.map"}