{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,0G,MCAzDC,EAAiB,IAAAC,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WCE5F,MAAMC,EAAyBC,SAASC,cACtC,4BAGF,SAASC,IACP,MAAMC,EAAgB,8CAEbC,EAAAZ,4CAGTO,EAAuBM,UAAYF,C,CCwDrC,SAASG,IACP,OAAOhB,KAAKC,MAAMgB,aAAaC,QAAQ,e,CC7DzC,MAAMC,EAAWT,SAASU,eAAe,WAEzC,SAASC,IACP,OAAOrB,KAAKC,MAAMgB,aAAaC,QAAQ,e,CAGzC,IAAII,EAAU,GACVC,EAAS,GAEb,MAAMC,EAAad,SAASC,cAAc,kBAmJ1C,SAASc,IACP,MAAMC,EAASJ,EAAQK,MAAKC,GAAUA,EAAOC,KAAON,IACpDO,iBAAiBJ,E,EAzInB,SAA6BK,GAE3B,GAAmB,OAAfA,GAA6C,IAAtBA,EAAWrC,OACpC,OAAOkB,IAGT,MAAMoB,EAASD,EAAWE,QAAO,CAACC,EAAKC,KA6FzC,IAAwBC,EAhEpB,OA5BAF,GAAO,wCAAwCC,EAAKN,0DACNM,EAAK5B,4IAoFvD,SAAkB4B,GAChB,MAAME,EAAWF,EAAKG,MAAMC,KAAIC,GAAMA,EAAG,kBAAkB,GAAGjC,MAC9D,OAAwB,IAApB8B,EAAS3C,OACJ,gCACK2C,C,CApFDI,CAASN,qBACTA,EAAKO,2EAsFIN,EAnFmCD,EAAKQ,WAoF1DP,GAGK,4FArFCD,EAAKN,IAAIe,MAAM,GAAIT,EAAKN,IAAInC,oBAuBxC,SAAwByC,GACtB,MAAMU,EAAYxB,IAElB,GAAIwB,EAAW,CACb,IAAK,IAAIpD,EAAI,EAAGA,EAAIoD,EAAUnD,OAAQD,GAAK,EACzC,GAAIoD,EAAUpD,GAAGoC,MAAQM,EACvB,MAAiB,oXAKrB,MAAiB,gX,CAInB,MAAiB,+W,CArCXW,CAAeX,EAAKN,+EAGiBM,EAAKY,qEAwDlD,SAAmBX,GACjB,OAAIA,EAAK1C,OAAS,IACT0C,EAAKY,UAAU,EAAG,KAAO,MAEzBZ,C,CAzDLa,CAAUd,EAAKe,oEAEyBf,EAAKN,gDA2DnD,SAAsBsB,GACpB,MAAOC,EAAMC,EAAOC,GAAOH,EAAWI,MAAM,KAE5C,MADgB,GAAGD,KAAOD,KAASD,G,CA5DGI,CAAarB,EAAKsB,oEACZtB,EAAK5B,kGAMxC2B,CAAG,GACT,8CAA8CH,EAAW,GAAG2B,YAC/DvC,EAASwC,mBAAmB,YAAa3B,E,CAhD3C4B,CAAoBvC,KAEpBL,IA+HAQ,EAAWqC,iBAAiB,SAE5B,SAAsBC,GACpBC,YAAW,MAKb,SAAkBD,GACU,MAAtBA,EAAEE,OAAOC,WACXH,EAAEI,iBACF3C,EAASuC,EAAEE,OAAOG,cAAcxE,GAEhC8B,I,CATA2C,CAASN,EAAE,GACV,I","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-cc323f1d93fc610b.js","node_modules/@parcel/runtime-js/lib/runtime-6080a51fed3a3adc.js","src/js/not-found-markup.js","src/js/localStorage.js","src/js/page-read.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"aWmzv\\\":\\\"read.98037987.js\\\",\\\"1ZTdA\\\":\\\"image-not-found.3b34eee6.jpg\\\"}\"));","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"1ZTdA\")).toString();","import noImg from '../images/image-not-found.jpg';\n\nconst favoriteGallerySection = document.querySelector(\n  '#favorite-galery-section'\n);\n\nfunction whenNotFoundMarkup() {\n  const notFoundImage = `<img\n    class=\"not-found__img\"\n    src=\"${noImg}\"\n    alt=\"Something went wrong\"\n  />`;\n  favoriteGallerySection.innerHTML = notFoundImage;\n}\n\nexport { whenNotFoundMarkup };\n","import { getPopularNews } from './api';\nimport { whenNotFoundMarkup } from './not-found-markup';\n\nfunction checkDarkTheme() {\n  const theme = localStorage.getItem('ui-theme');\n  if (theme !== null) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction changeTheme() {\n  const theme = checkDarkTheme('ui-theme');\n  if (theme) {\n    localStorage.removeItem('ui-theme');\n  } else {\n    localStorage.setItem('ui-theme', 'dark');\n  }\n}\n\nfunction getFavoriteArticles() {\n  return JSON.parse(localStorage.getItem('favoriteArticles'));\n}\nfunction checkLocalstorage() {\n  let LocalstorageObjects = getFavoriteArticles() || {};\n  if (LocalstorageObjects.length === 0) {\n    whenNotFoundMarkup();\n  }\n}\n\nfunction addToFavoriteArticles(item) {\n  let favorite = getFavoriteArticles();\n  if (favorite === null) {\n    favorite = [item];\n  } else {\n    favorite.push(item);\n  }\n  localStorage.setItem('favoriteArticles', JSON.stringify(favorite));\n}\n\nfunction removeFromFavoriteArticles(itemId) {\n  let favorite = getFavoriteArticles();\n  let indexCard = 0;\n  favorite.map((item, index) => {\n    const cardId = item.uri.slice(38, item.uri.length);\n    if (cardId === itemId) {\n      indexCard = index;\n    }\n  });\n  favorite.splice(indexCard, 1);\n  localStorage.setItem('favoriteArticles', JSON.stringify(favorite));\n  checkLocalstorage();\n}\n// testFavorite();\nfunction testFavorite() {\n  getPopularNews().then(resp => {\n    localStorage.setItem('favoriteArticles', JSON.stringify(resp));\n  });\n}\nasync function testReding() {\n  const news = await getPopularNews();\n  for (elNews of news) {\n    elNews.date = elNews.published_date;\n  }\n  localStorage.setItem('readingNews', JSON.stringify(news));\n}\n\nfunction getReadingNews() {\n  return JSON.parse(localStorage.getItem('readingNews'));\n}\n\nfunction addToReadingNews(item) {\n  const addNews = item;\n  addNews.date = new Date().toLocaleDateString();\n  let readingNews = getReadingNews();\n\n  if (readingNews === null) {\n    readingNews = [addNews];\n  } else {\n    readingNews.push(addNews);\n  }\n  localStorage.setItem('readingNews', JSON.stringify(readingNews));\n}\n\nfunction getDatesReadingNews() {\n  let readingNews = getReadingNews();\n  let arrDate = [];\n\n  for (elNews of readingNews) {\n    if (!arrDate.includes(elNews.date)) {\n      arrDate.push(elNews.date);\n    }\n  }\n  return arrDate;\n}\n\nfunction getReadingNewsByDate(date) {\n  let readingNews = getReadingNews();\n  return readingNews.filter(news => news.date === date);\n}\n\nexport {\n  checkDarkTheme,\n  changeTheme,\n  getFavoriteArticles,\n  addToFavoriteArticles,\n  removeFromFavoriteArticles,\n  testFavorite,\n  addToReadingNews,\n  getDatesReadingNews,\n  getReadingNewsByDate,\n  getReadingNews,\n  testReding,\n};\n","import {\n  getDatesReadingNews,\n  getReadingNewsByDate,\n  // testReding,\n  getReadingNews,\n} from './localStorage';\nimport { whenNotFoundMarkup } from './not-found-markup';\n\nconst readUlEl = document.getElementById('read-ul');\n\nfunction getReadArticles() {\n  return JSON.parse(localStorage.getItem('readingNews'));\n}\n\nlet newsAll = [];\nlet idNews = [];\n\nconst markupList = document.querySelector('#favorite-list');\ngenerateCardsMarkup(getReadArticles());\n\ngetReadingNews();\n\n// getDatesReadingNews();\n// const arrOfDates = getDatesReadingNews();\n// for (date of arrOfDates) {\n//   const news = getReadingNewsByDate(date);\n//   generateCardsMarkup(news);\n// }\n\nfunction generateCardsMarkup(cardsArray) {\n  // newsAll = newsCard;\n  if (cardsArray === null || cardsArray.length === 0) {\n    return whenNotFoundMarkup();\n  }\n\n  const markup = cardsArray.reduce((acc, item) => {\n    acc += `<li class=\"favorite-cards__item\" id=\"${item.uri}\">\n    <a class=\"favorite-cards__image-link\" href=\"${item.url}\" target=\"_blank\"\n    rel=\"noopener noreferrer nofollow\">\n      <img\n        class=\"favorite-cards__img\" width=\"440\"\n        src=\"${getPhoto(item)}\"\n        alt=\"${item.per_facet}\"\n      \n      />\n      <p class=\"favorite-cards__category\">${addDefaultText(item.subsection)}</p>\n      <button type=\"button\" class=\"favorite-cards__remove-btn\n      id=\"${item.uri.slice(38, item.uri.length)}\">\n      ${onLoadFavorits(item.uri)}\n      </button>\n    </a>\n    <h2 class=\"favorite-cards__news-title\">${item.title}\n    </h2>\n    <p class=\"favorite-cards__dicription\">\n    ${limitText(item.abstract)}\n    </p>\n    <div class=\"favorite-cards__bottom\" id=\"${item.uri}\">\n      <p class=\"favorite-cards__date\">${reformatDate(item.published_date)}</p>\n      <a class=\"favorite-cards__link\" href=\"${item.url}\" target=\"_blank\"\n      rel=\"noopener\">\n        Read more\n      </a>\n    </div>\n  </li>`;\n    return acc;\n  }, `<p class=\"list-by-date\">new data news      ${cardsArray[0].date}</p>`);\n  readUlEl.insertAdjacentHTML('beforeend', markup);\n}\n// ${onLoadFavorits(item.uri)}\n\nfunction onLoadFavorits(item) {\n  const localRead = getReadArticles();\n  let result = [];\n  if (localRead) {\n    for (let i = 0; i < localRead.length; i += 1) {\n      if (localRead[i].uri === item) {\n        return (result = `Remove from read<svg class=\"favorite-cards__heart-icon\" width=\"36\" height=\"32\">\n            <path fill=\"var(--few)\" style=\"stroke: var(--few)\" d=\"M10.325 0.875c-1.472 0-2.738 1.197-3.325 2.447-0.587-1.25-1.854-2.447-3.325-2.447-2.029 0-3.675 1.647-3.675 3.675 0 4.127 4.163 5.209 7 9.289 2.682-4.055 7-5.294 7-9.289 0-2.029-1.647-3.675-3.675-3.675z\">\n          </svg>`);\n      }\n    }\n    return (result = `Add to read<svg class=\"favorite-cards__heart-icon\" width=\"36\" height=\"32\">\n            <path fill=\"transparent\" style=\"stroke: var(--few)\"  d=\"M10.325 0.875c-1.472 0-2.738 1.197-3.325 2.447-0.587-1.25-1.854-2.447-3.325-2.447-2.029 0-3.675 1.647-3.675 3.675 0 4.127 4.163 5.209 7 9.289 2.682-4.055 7-5.294 7-9.289 0-2.029-1.647-3.675-3.675-3.675z\">\n          </svg>`);\n  }\n  return (result = `Add to read<svg class=\"favorite-cards__heart-icon\" width=\"36\" height=\"32\">\n            <path fill=\"transparent\" style=\"stroke: var(--few)\" d=\"M10.325 0.875c-1.472 0-2.738 1.197-3.325 2.447-0.587-1.25-1.854-2.447-3.325-2.447-2.029 0-3.675 1.647-3.675 3.675 0 4.127 4.163 5.209 7 9.289 2.682-4.055 7-5.294 7-9.289 0-2.029-1.647-3.675-3.675-3.675z\">\n          </svg>`);\n}\nfunction onAddNews(e) {\n  if (e.target.nodeName === 'BUTTON') {\n    e.preventDefault();\n    idNews = e.target.parentElement.parentElement.id;\n    if (e.target.firstChild.data.trim() === 'Add to favorite') {\n      e.target.firstChild.data = `Remove from favorite`;\n      e.target.lastElementChild.lastElementChild.attributes.fill.textContent =\n        '#4b48db';\n      findIdNews();\n    } else {\n      e.target.firstChild.data = `Add to favorite`;\n      e.target.lastElementChild.lastElementChild.attributes.fill.textContent =\n        'transparent';\n      deleteCard(e);\n    }\n  }\n}\n\nfunction limitText(text) {\n  if (text.length > 110) {\n    return text.substring(0, 110) + '...';\n  } else {\n    return text;\n  }\n}\n\nfunction reformatDate(dateString) {\n  const [year, month, day] = dateString.split('-');\n  const newDate = `${day}/${month}/${year}`;\n  return newDate;\n}\n\nfunction getPhoto(item) {\n  const photoUrl = item.media.map(el => el['media-metadata'][2].url);\n  if (photoUrl.length === 0) {\n    return '/image-not-found.584be82b.jpg';\n  } else return photoUrl;\n}\n\nfunction addDefaultText(text) {\n  if (text) {\n    return text;\n  } else {\n    return 'Other...';\n  }\n}\n\nfunction deleteCard(event) {\n  event.preventDefault();\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  const uriId = event.target.attributes[2].nodeName;\n  const uriIdClean = uriId.slice(0, uriId.length - 1);\n  removeFromFavoriteArticles(uriIdClean);\n}\n\nmarkupList.addEventListener('click', runSetTimout);\n\nfunction runSetTimout(e) {\n  setTimeout(() => {\n    goToRead(e);\n  }, 1000);\n}\n\nfunction goToRead(e) {\n  if (e.target.nodeName === 'A') {\n    e.preventDefault();\n    idNews = e.target.parentElement.id;\n    // window.location.href = e.target.href;\n    findIdNews();\n  }\n}\n\nfunction findIdNews() {\n  const finded = newsAll.find(option => option.uri == idNews);\n  addToReadingNews(finded);\n}\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$cfc4fc3c64115383$exports","URL","resolve","import","meta","url","toString","$0d369889fb3f0ac9$var$favoriteGallerySection","document","querySelector","$0d369889fb3f0ac9$export$647a542d39618f73","notFoundImage","$parcel$interopDefault","innerHTML","$2338c8cd734f85a6$export$a79b089ce91fc81d","localStorage","getItem","$db433d53755dbfd7$var$readUlEl","getElementById","$db433d53755dbfd7$var$getReadArticles","$db433d53755dbfd7$var$newsAll","$db433d53755dbfd7$var$idNews","$db433d53755dbfd7$var$markupList","$db433d53755dbfd7$var$findIdNews","finded","find","option","uri","addToReadingNews","cardsArray","markup","reduce","acc","item","text","photoUrl","media","map","el","$db433d53755dbfd7$var$getPhoto","per_facet","subsection","slice","localRead","$db433d53755dbfd7$var$onLoadFavorits","title","substring","$db433d53755dbfd7$var$limitText","abstract","dateString","year","month","day","split","$db433d53755dbfd7$var$reformatDate","published_date","date","insertAdjacentHTML","$db433d53755dbfd7$var$generateCardsMarkup","addEventListener","e","setTimeout","target","nodeName","preventDefault","parentElement","$db433d53755dbfd7$var$goToRead"],"version":3,"file":"read.98037987.js.map"}